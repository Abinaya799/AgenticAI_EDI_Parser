{ 
  "$schema": "https://json-schema.org/draft/2020-12/schema", 
  "$id": "https://our-org.example/schemas/golden-invoice-0-1.json", 
  "title": "Golden Invoice JSON v0.1", 
  "type": "object", 
  "additionalProperties": false, 
  "properties": { 
    "invoice_id": { "type": "string", "minLength": 1 }, 
    "side": { "type": "string", "enum": ["buy", "sell"], "default": "buy" }, 
    "source": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "type": { "type": "string", "enum": ["edi210", "pdf", "image", "csv", "api"] }, 
        "doc_uri": { "type": ["string", "null"], "minLength": 1 } 
      }, 
      "required": ["type"] 
    }, 
    "carrier": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "name": { "type": ["string", "null"] }, 
        "scac": { "type": ["string", "null"] } 
      } 
    }, 
    "customer": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "name": { "type": ["string", "null"] }, 
        "account_id": { "type": ["string", "null"] } 
      } 
    }, 
    "refs": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "bol": { "type": ["string", "null"] }, 
        "pro": { "type": ["string", "null"] }, 
        "po": { "type": ["string", "null"] }, 
        "load_id": { "type": ["string", "null"] } 
      } 
    }, 
    "parties": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "ship_from": { "type": ["string", "null"] }, 
        "ship_to": { "type": ["string", "null"] }, 
        "bill_to": { "type": ["string", "null"] } 
      } 
    }, 
    "dates": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "invoice": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" }, 
        "pickup": { "type": ["string", "null"], "pattern": "^\\d{4}-\\d{2}-\\d{2}$" }, 
        "delivery": { "type": ["string", "null"], "pattern": "^\\d{4}-\\d{2}-\\d{2}$" } 
      }, 
      "required": ["invoice"] 
    }, 
    "currency": { "type": "string", "minLength": 3, "maxLength": 3, "description": "ISO 4217 code (e.g., USD, INR)" }, 
    "charges": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "base_freight": { "type": "number" }, 
        "fuel_surcharge": { "type": "number", "default": 0 }, 
        "detention": { "type": "number", "default": 0 }, 
        "other": { 
          "type": "array", 
          "items": { 
            "type": "object", 
            "additionalProperties": false, 
            "properties": { 
              "code": { "type": "string" }, 
              "desc": { "type": ["string", "null"] }, 
              "amount": { "type": "number" } 
            }, 
            "required": ["code", "amount"] 
          }, 
          "default": [] 
       } 
      }, 
      "required": ["base_freight"] 
    }, 
    "total": { "type": "number" }, 
    "metadata": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "golden_schema_version": { "type": "string", "const": "0.1" }, 
        "parser_version": { "type": "string" }, 
        "edi_version": { "type": ["string", "null"] }, 
        "trading_partner": { "type": ["string", "null"] }, 
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 } 
      }, 
      "required": ["golden_schema_version", "parser_version"] 
    }, 
    "evidence": { 
      "type": "object", 
      "additionalProperties": false, 
      "properties": { 
        "doc_uri": { "type": ["string", "null"] }, 
        "attachments": { 
          "type": "array", 
          "items": { "type": "string" }, 
          "default": [] 
        } 
      } 
    } 
  }, 
  "required": ["invoice_id", "side", "source", "dates", "currency", "charges", "total", "metadata"] 
} 